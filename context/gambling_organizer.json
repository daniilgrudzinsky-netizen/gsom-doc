{
  "openapi": "3.0.0",
  "info": {
    "title": "ДСОМ",
    "description": "**Загальні правила:**\n\n**Числа з комою:**\nЗадля відсутності додаткової логіки, пов'язаної з обробкою чисел з комою, неціла частка грошових значень ПОВИННА бути домножена на 100.\n\n**Дати:**\nДля відсутності додаткової логіки, пов'язаної з обробкою таймзон: \n- Усі календарні дати ПОВИННІ бути надіслані у вигляді кількості днів, що пройшли з 1 Січня 1970 року 00:00 GMT.\n- Усі часові позначки (timestamp) ПОВИННІ бути надіслани у вигляді кількості мілісекунд що пройшли з 1 Січня 1970 року 00:00 GMT.\n",
    "contact": {
      "email": "daniil.grudzinsky@gmail.com"
    },
    "version": "1.1.0"
  },
  "servers": [
    {
      "url": "https://public.dev.gamblingmonitoring.org/"
    }
  ],
  "tags": [
    {
      "name": "Завантаження звіту"
    },
    {
      "name": "Допоміжні виклики"
    }
  ],
  "paths": {
    "/upload-handler/v1/upload": {
      "post": {
        "tags": [
          "Завантаження звіту"
        ],
        "summary": "завантаження звіту",
        "description": "Завантаження звіту зі ставками та грошовими операціями для подалішої обробки.",
        "operationId": "reportUpload",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/v1_upload_body"
              },
              "encoding": {
                "file": {
                  "contentType": "application/json",
                  "style": "form"
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Цифровий підпис звіту сформований вірно. Звіт та підпис збережені, звіту наданий унікальний ідентифікатор.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/inline_response_200"
                }
              }
            }
          },
          "400": {
            "description": "Цифровий підпис звіту сформований некорректно. Звіт не збережено",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/inline_response_400"
                }
              }
            }
          },
          "401": {
            "description": "Запит не авторизовано"
          },
          "408": {
            "description": "Час завантаження файлу з звітом більший за максимальний дозволений",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/inline_response_400"
                }
              }
            }
          },
          "413": {
            "description": "Розмір файлу з звітом більший за максимальний дозволений",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/inline_response_400"
                }
              }
            }
          },
          "500": {
            "description": "Неочікувана помилка під час обробки. Будь ласка, повторіть спробу завантажити звіт",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/inline_response_500"
                }
              }
            }
          }
        },
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    },
    "/upload-handler/v1/correction": {
      "post": {
        "tags": [
          "Завантаження звіту"
        ],
        "summary": "завантаження коригуючого звіту",
        "description": "Завантаження коригуючого звіту з редагованими ставками та грошовими операціями для подальшого опрацювання.\n\n*Оночасно може бути відправлено на збереження тільки один звіт. Як тільки звіт буде збережено, новий звіт може бути прийнятий.*\n",
        "operationId": "correctionReportUpload",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/v1_correction_body"
              },
              "encoding": {
                "file": {
                  "contentType": "application/json",
                  "style": "form"
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Цифровий підпис звіту сформований вірно. Звіт та підпис збережені, звіту наданий унікальний ідентифікатор.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/inline_response_200"
                }
              }
            }
          },
          "400": {
            "description": "Цифровий підпис звіту сформований некорректно. Звіт не збережено",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/inline_response_400"
                }
              }
            }
          },
          "401": {
            "description": "Запит не авторизовано"
          },
          "408": {
            "description": "Час завантаження файлу з звітом більший за максимальний дозволений",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/inline_response_400"
                }
              }
            }
          },
          "409": {
            "description": "Інший коригуючий звіт ще не оброблено. Треба повторити спробу після збереження",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/inline_response_409"
                }
              }
            }
          },
          "413": {
            "description": "Розмір файлу з звітом більший за максимальний дозволений",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/inline_response_400"
                }
              }
            }
          },
          "500": {
            "description": "Неочікувана помилка під час обробки. Будь ласка, повторіть спробу завантажити звіт",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/inline_response_500"
                }
              }
            }
          }
        },
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    },
    "/api/v1/auth/challenge": {
      "get": {
        "tags": [
          "Допоміжні виклики"
        ],
        "summary": "отримання тимчасового токену",
        "description": "Отримання тимчасового токену, що оновлюється кожні 30 секунд. Для отримання токена авторизації, цей токен має бути підписаний ЕЦП організатора азартних ігор і надісланий на /auth/login ендпоінт.\n",
        "operationId": "challenge",
        "responses": {
          "200": {
            "description": "Токен успішно сформований",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/inline_response_200_1"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "tags": [
          "Допоміжні виклики"
        ],
        "summary": "отримання токену авторизації",
        "description": "Обмін ЕЦП тимчасового токена, отриманого з виклику /api/v1/auth/challenge, на токен авторизацій. Токен авторизації використовується для виконання запитів які вимагають авторизації. Отриманий токен повинен бути доданий до захищєних запитів у вигляді HTTP хедеру Authorization: Bearer {token}\n\n- Підпис тимчасового токену повинен бути сформований у форматі CAdES-X Long відповідно до **ДСТУ 4145-2002**. \n- Організатор повинен використовувати геш-функцію **ГОСТ 34.311-95**. *[що у подальшому буде замінена на **ДСТУ 7564:2014**, коли остання здобуде широке розповсюдження]*\n- Підпис має бути здійснений кваліфікованим ключем ЕЦП що належить організатору азартних ігор.\n",
        "operationId": "login",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/auth_login_body"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Токен успішно сформований",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/inline_response_200_2"
                }
              }
            }
          },
          "401": {
            "description": "Цифровий підпис тимчасового токену сформований некорректно. Запит на авторизацію відхилено",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/inline_response_401"
                }
              }
            }
          },
          "404": {
            "description": "Код ЄДРПОУ ключа ЕЦП, яким було сформовано підпис, не належить жодному з відомих організаторів азартних ігор",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/inline_response_404"
                }
              }
            }
          },
          "500": {
            "description": "Неочікувана помилка під час обробки. Будь ласка, отримайте новий тимчасовий токен та повторіть спробу авторизації",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/inline_response_404"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/registry/establishments": {
      "get": {
        "tags": [
          "Допоміжні виклики"
        ],
        "summary": "перелік закладів",
        "description": "Отримання переліку ідентифікаторів закладів, що мають використовуватись для надсилання звітів. Поле Id має використовуватись у якості значення поля establishment при надсиланні звітів за допомогою виклику */upload-handler/v1/upload*.\n",
        "operationId": "getEstablishments",
        "responses": {
          "200": {
            "description": "Перелік закладів що належать авторизованому організатору азартних ігор",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/inline_response_200_3"
                  }
                }
              }
            }
          },
          "401": {
            "description": "запит не авторизовано"
          }
        },
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    },
    "/api/v1/report-status/by-id": {
      "get": {
        "tags": [
          "Допоміжні виклики"
        ],
        "summary": "статус завантаженого звіту",
        "description": "Отримання статусу завантаженого звіту\n",
        "operationId": "reportStatus",
        "parameters": [
          {
            "name": "reportId",
            "in": "query",
            "description": "ідентифікатор звіту, що було отримано у відповідь на виклик *upload-handler/v1/upload*\n",
            "required": false,
            "style": "form",
            "explode": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Статус завантаженого звіту",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/inline_response_200_4"
                  }
                }
              }
            }
          },
          "401": {
            "description": "запит не авторизовано"
          }
        },
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    },
    "/api/v1/correction-report-status/by-id": {
      "get": {
        "tags": [
          "Допоміжні виклики"
        ],
        "summary": "статус завантаженого коригуючого звіту",
        "description": "Отримання статусу завантаженого коригуючого звіту\n",
        "operationId": "correctionReportStatus",
        "parameters": [
          {
            "name": "reportId",
            "in": "query",
            "description": "ідентифікатор звіту, що було отримано у відповідь на виклик *upload-handler/v1/correction-upload*\n",
            "required": false,
            "style": "form",
            "explode": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Статус завантаженого звіту",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/inline_response_200_5"
                  }
                }
              }
            }
          },
          "401": {
            "description": "запит не авторизовано"
          }
        },
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    }
  },
  "components": {
    "schemas": {
      "CorrectionReportData": {
        "required": [
          "currencyOperations",
          "day",
          "hour",
          "operations"
        ],
        "type": "object",
        "properties": {
          "day": {
            "type": "number",
            "description": "Дата в київському часовому поясу, протягом якої були записані оригінальни ставки та грошові операції\n",
            "example": 19318
          },
          "hour": {
            "type": "number",
            "description": "Година в київському часовому поясу, протягом якої були записані оригінальні ставки та грошові операції. \n\nПара day/hour формують конкретну годину. Файл має містити ставки та грошові операції, які були записані лише протягом цієї конкретої години \n",
            "example": 10
          },
          "operations": {
            "type": "array",
            "items": {
              "oneOf": [
                {
                  "$ref": "#/components/schemas/PlacedBetEvent"
                },
                {
                  "$ref": "#/components/schemas/SettledBetEvent"
                },
                {
                  "$ref": "#/components/schemas/ReturnedBetEvent"
                },
                {
                  "$ref": "#/components/schemas/InstantBetEvent"
                }
              ]
            }
          },
          "currencyOperations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CurrencyOperation"
            }
          }
        },
        "description": "Файл коригуючого звіту у форматі JSON.\n- Файл має не перевищувати 300000 операцій або 500 MB\n- Файл повинен бути надісланий у кодуванні UTF-8 і не повинен бути скомпресованим\n- Порядок властивостей у JSON файлі має дотримуватись\n- Ставки та грошові операції у файлі ПОВИННІ мати часову позначку, що належть останнім 30 дням до моменту завантаження звіту.\n- Ставки та грошові операції у файлі ПОВИННІ мати часову позначку, що належать дню та годині, вказані в інших властивостях JSON файлу\n"
      },
      "ReportData": {
        "required": [
          "currencyOperations",
          "day",
          "operationWindow",
          "operations"
        ],
        "type": "object",
        "properties": {
          "day": {
            "type": "number",
            "description": "Дата надсилання звіту",
            "example": 19318
          },
          "operationWindow": {
            "type": "number",
            "description": "Порядковий номер звіту у дні. Має інкрементуватись з кожним наступним звітом. Лише один звіт з унікальною парою day/operationWindow може бути завантажений в ДСОМ.\n",
            "example": 10
          },
          "operations": {
            "type": "array",
            "items": {
              "oneOf": [
                {
                  "$ref": "#/components/schemas/PlacedBetEvent"
                },
                {
                  "$ref": "#/components/schemas/SettledBetEvent"
                },
                {
                  "$ref": "#/components/schemas/ReturnedBetEvent"
                },
                {
                  "$ref": "#/components/schemas/InstantBetEvent"
                }
              ]
            }
          },
          "currencyOperations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/CurrencyOperation"
            }
          }
        },
        "description": "Файл звіту у форматі JSON.\n- Файл має не перевищувати 300000 операцій або 500 MB\n- Файл повинен бути надісланий у кодуванні UTF-8 і не повинен бути скомпресованим\n- Порядок властивостей у JSON файлі має дотримуватись\n- Ставки та грошові операції у файлі ПОВИННІ мати часову позначку, що належать останнім 48 годинам до моменту завантаження звіту.\n"
      },
      "CurrencyOperation": {
        "required": [
          "establishment",
          "gamblingType",
          "licence",
          "playerId",
          "transactionId"
        ],
        "type": "object",
        "properties": {
          "playerId": {
            "type": "integer",
            "description": "Унікальний ідентифікатор гравця в системі організатора азартних ігор, має бути незмінним для всіх ставок створених одним гравцем  \n  \n*В коригуючому звіті значення може не збігатися з оригінальним значенням, якщо в цих даних була помилка, яка потребує виправлення.*\n",
            "format": "int64"
          },
          "transactionId": {
            "type": "integer",
            "description": "Унікальний ідентифікатор операції у системі організатора азартних ігор  \n\n*В коригуючому звіті значення ПОВИННО збігатися з оригінальним значенням.*\n",
            "format": "int64"
          },
          "gamblingType": {
            "description": "Тип ліцензії, згідно якої була створена ставка. Детальна інформація щодо типів ліцензій надана в секції 'GamblingType'  \n\n*В коригуючому звіті значення ПОВИННО збігатися з оригінальним значенням.*\n",
            "allOf": [
              {
                "$ref": "#/components/schemas/GamblingType"
              }
            ]
          },
          "licence": {
            "type": "string",
            "description": "Номер ліцензії на провадження діяльності, згідно якої була проведена грошова операція  \n\n*В коригуючому звіті значення може не збігатися з оригінальним значенням, якщо в цих даних була помилка, яка потребує виправлення.*\n"
          },
          "amountPlaced": {
            "type": "integer",
            "description": "Кількість грошей, у копійках, що була заведена або виведена з системи  \n\n*В коригуючому звіті значення може не збігатися з оригінальним значенням, якщо в цих даних була помилка, яка потребує виправлення.*\n",
            "format": "int64"
          },
          "kind": {
            "type": "integer",
            "description": "- 1 - заведення грошей на рахунок\n- 2 - виведення грошей з рахунку  \n\n\n*В коригуючому звіті значення може не збігатися з оригінальним значенням, якщо в цих даних була помилка, яка потребує виправлення.*\n",
            "enum": [
              1,
              2
            ]
          },
          "eventTime": {
            "type": "integer",
            "description": "Часова позначка що відображає момент грошової операції  \n\n*В коригуючому звіті значення ПОВИННО збігатися з оригінальним значенням.*\n"
          },
          "establishment": {
            "type": "integer",
            "description": "Унікальний ідентифікатор приміщєння або вебсайту в системі ДСОМ, у якому провадиться діяльність з організації азартних ігор. Детальна інформація щодо ідентефікаторів та їх актуалізації надана в секції *api/v1/registry/establishments*  \n\n*В коригуючому звіті значення може не збігатися з оригінальним значенням, якщо в цих даних була помилка, яка потребує виправлення.*\n"
          },
          "paymentForm": {
            "type": "integer",
            "description": "- 1 - готівкова операція\n- 2 - безготівкова операція  \n\n*В коригуючому звіті значення може не збігатися з оригінальним значенням, якщо в цих даних була помилка, яка потребує виправлення.*\n",
            "enum": [
              1,
              2
            ]
          },
          "exchangeWay": {
            "type": "string",
            "description": "Cпосіб в який проводиться транзакція. Надіслана у формі довільного тексту, організатор має використувати найкоротшу можливу форму запису, яка по тому дозволяє зрозуміти використаний метод. Наприклад:\n- Банківський переказ\n- Гаманці платіжної системи\n- Готівка в касі  \n\n*В коригуючому звіті значення може не збігатися з оригінальним значенням, якщо в цих даних була помилка, яка потребує виправлення.*\n"
          }
        }
      },
      "BasicBetEventProperties": {
        "required": [
          "establishment",
          "gamblingType",
          "gameId",
          "licence",
          "playerId"
        ],
        "type": "object",
        "properties": {
          "playerId": {
            "type": "integer",
            "description": "Унікальний ідентифікатор гравця в системі організатора азартних ігор, має бути незмінним для всіх ставок створених одним гравцем.  \n\n*В коригуючому звіті значення може не збігатися з оригінальним значенням, якщо в цих даних була помилка, яка потребує виправлення.*\n",
            "format": "int64"
          },
          "gameId": {
            "type": "string",
            "description": "Ідентифікатор гри. Рядок довільного тексту. Наприклад: \"Футбол\", \"Dota\". Організатор має намагатися тримати ідентифікатори якомога меншими, при тому достатніми для однозначного визначення гри.  \n\n*В коригуючому звіті значення може не збігатися з оригінальним значенням, якщо в цих даних була помилка, яка потребує виправлення.*\n"
          },
          "licence": {
            "type": "string",
            "description": "Номер ліцензії на провадження діяльності, згідно якої була створена ставка  \n\n*В коригуючому звіті значення може не збігатися з оригінальним значенням, якщо в цих даних була помилка, яка потребує виправлення.*\n"
          },
          "gamblingType": {
            "description": "Тип ліцензії, згідно якої була створена ставка. Детальна інформація щодо типів ліцензій надана в секції 'GamblingType'  \n\n*В коригуючому звіті значення ПОВИННО збігатися з оригінальним значенням.*\n",
            "allOf": [
              {
                "$ref": "#/components/schemas/GamblingType"
              }
            ]
          },
          "establishment": {
            "type": "integer",
            "description": "Унікальний ідентифікатор приміщєння або вебсайту в системі ДСОМ, у якому провадиться діяльність з організації азартних ігор. Детальна інформація щодо ідентефікаторів та їх актуалізації надана в секції *api/v1/registry/establishments*  \n\n*В коригуючому звіті значення може не збігатися з оригінальним значенням, якщо в цих даних була помилка, яка потребує виправлення.*\n"
          },
          "equipment": {
            "type": "string",
            "description": "виробничий номер обладнання, на якому відбулася ставка. Повинен лишатись пустим для онлайн ставок.  \n\n*В коригуючому звіті значення може не збігатися з оригінальним значенням, якщо в цих даних була помилка, яка потребує виправлення.*\n"
          },
          "equipmentLicence": {
            "type": "string",
            "description": "Номер ліцензії, згідно якої використовуюється обладнання на якому відбулася ставка. Повинен лишатись пустим для онлайн ставок.  \n\n*В коригуючому звіті значення може не збігатися з оригінальним значенням, якщо в цих даних була помилка, яка потребує виправлення.*\n"
          }
        }
      },
      "PlacedBetEvent": {
        "allOf": [
          {
            "$ref": "#/components/schemas/BasicBetEventProperties"
          },
          {
            "required": [
              "amountPlaced",
              "betId",
              "gambling",
              "placedAt",
              "rate",
              "state"
            ],
            "type": "object",
            "properties": {
              "betId": {
                "type": "integer",
                "description": "Унікальний ідентифікатор ставки у системі організатора азартних ігор  \n\n*В коригуючому звіті значення ПОВИННО збігатися з оригінальним значенням.*\n",
                "format": "int64"
              },
              "gambling": {
                "type": "string",
                "description": "Унікальний ідентифікатор ігрової події на яку приймаються ставки у системі організатора азартних ігор. Має вигляд довільного тексту. Наприклад:\n- Динамо-Іллічівець\n- Bly-PtitDrogo  \n\n*Організатор має намагатися тримати ідентифікатор якомога меншим, при тому достатнім для однозначного визначення ігрової події.*  \n\n*В коригуючому звіті значення може не збігатися з оригінальним значенням, якщо в цих даних була помилка, яка потребує виправлення.*\n"
              },
              "amountPlaced": {
                "type": "integer",
                "description": "Кількість грошей, у копійках, що була поставлена гравцем на подію  \n\n*В коригуючому звіті значення може не збігатися з оригінальним значенням, якщо в цих даних була помилка, яка потребує виправлення.*\n",
                "format": "int64"
              },
              "rate": {
                "type": "string",
                "description": "коефіцієнт ставки  \n\n*В коригуючому звіті значення може не збігатися з оригінальним значенням, якщо в цих даних була помилка, яка потребує виправлення.*\n"
              },
              "placedAt": {
                "type": "integer",
                "description": "часова позначка що відображає момент ставки  \n\n*В коригуючому звіті значення ПОВИННО збігатися з оригінальним значенням.*\n"
              },
              "state": {
                "type": "string",
                "description": "ідентифікатор типу запису. Має дорівнювати \"placed\"  \n\n*В коригуючому звіті значення ПОВИННО збігатися з оригінальним значенням.*\n"
              }
            },
            "description": "Запис що відображає створення ставки"
          }
        ]
      },
      "SettledBetEvent": {
        "allOf": [
          {
            "$ref": "#/components/schemas/BasicBetEventProperties"
          },
          {
            "required": [
              "amountPaid",
              "betId",
              "gambling",
              "rate",
              "settledAt",
              "state"
            ],
            "type": "object",
            "properties": {
              "betId": {
                "type": "integer",
                "description": "Унікальний ідентифікатор ставки у системі організатора азартних ігор. Повинен співпадати з ідентифікатором, надісланим раніше рядком типу 'PlacedBetEvent'  \n\n*В коригуючому звіті значення ПОВИННО збігатися з оригінальним значенням.*\n",
                "format": "int64"
              },
              "gambling": {
                "type": "string",
                "description": "Унікальний ідентифікатор ігрової події на яку приймаються ставки у системі організатора азартних ігор. Має вигляд довільного тексту. Наприклад:\n- Динамо-Іллічівець\n- Bly-PtitDrogo\n\n*Організатор має намагатися тримати ідентифікатор якомога меншим, при тому достатнім для однозначного визначення ігрової події.*\n\n*В коригуючому звіті значення може не збігатися з оригінальним значенням, якщо в цих даних була помилка, яка потребує виправлення.*\n"
              },
              "amountPaid": {
                "type": "integer",
                "description": "кількість грошей, у копійках, що була виплачена гравцю за результатом події\n\n*В коригуючому звіті значення може не збігатися з оригінальним значенням, якщо в цих даних була помилка, яка потребує виправлення.*\n",
                "format": "int64"
              },
              "rate": {
                "type": "string",
                "description": "коефіцієнт ставки\n\n*В коригуючому звіті значення може не збігатися з оригінальним значенням, якщо в цих даних була помилка, яка потребує виправлення.*\n"
              },
              "settledAt": {
                "type": "integer",
                "description": "часова позначка що відображає момент розрахування ставки\n\n*В коригуючому звіті значення ПОВИННО збігатися з оригінальним значенням.*\n"
              },
              "state": {
                "type": "string",
                "description": "ідентифікатор типу запису. Має дорівнювати \"settled\"  \n\n*В коригуючому звіті значення ПОВИННО збігатися з оригінальним значенням.*\n"
              }
            },
            "description": "Запис що відображає розрахування ставки"
          }
        ]
      },
      "ReturnedBetEvent": {
        "allOf": [
          {
            "$ref": "#/components/schemas/BasicBetEventProperties"
          },
          {
            "required": [
              "amountReturned",
              "betId",
              "gambling",
              "returnReason",
              "returnedAt",
              "state"
            ],
            "type": "object",
            "properties": {
              "betId": {
                "type": "integer",
                "description": "Унікальний ідентифікатор ставки у системі організатора азартних ігор. Повинен співпадати з ідентифікатором, надісланим раніше рядком типу 'PlacedBetEvent'\n\n*В коригуючому звіті значення ПОВИННО збігатися з оригінальним значенням.*\n",
                "format": "int64"
              },
              "gambling": {
                "type": "string",
                "description": "Унікальний ідентифікатор ігрової події на яку приймаються ставки у системі організатора азартних ігор. Має вигляд довільного тексту. Наприклад:\n- Динамо-Іллічівець\n- Bly-PtitDrogo\n\n*Організатор має намагатися тримати ідентифікатор якомога меншим, при тому достатнім для однозначного визначення ігрової події.*\n\n*В коригуючому звіті значення може не збігатися з оригінальним значенням, якщо в цих даних була помилка, яка потребує виправлення.*\n"
              },
              "amountReturned": {
                "type": "integer",
                "description": "кількість грошей, у копійках, що була повернена гравцю\n\n*В коригуючому звіті значення може не збігатися з оригінальним значенням, якщо в цих даних була помилка, яка потребує виправлення.*\n",
                "format": "int64"
              },
              "returnReason": {
                "type": "string",
                "description": "причина повернення ставки\n\n*В коригуючому звіті значення може не збігатися з оригінальним значенням, якщо в цих даних була помилка, яка потребує виправлення.*\n"
              },
              "returnedAt": {
                "type": "integer",
                "description": "часова позначка що відображає момент повернення ставки\n\n*В коригуючому звіті значення ПОВИННО збігатися з оригінальним значенням.*\n"
              },
              "state": {
                "type": "string",
                "description": "ідентифікатор типу запису. Має дорівнювати \"returned\"\n\n*В коригуючому звіті значення ПОВИННО збігатися з оригінальним значенням.*\n"
              }
            },
            "description": "Запис що відображає повернення ставки"
          }
        ]
      },
      "InstantBetEvent": {
        "allOf": [
          {
            "$ref": "#/components/schemas/BasicBetEventProperties"
          },
          {
            "required": [
              "bets",
              "state"
            ],
            "type": "object",
            "properties": {
              "bets": {
                "type": "array",
                "items": {
                  "oneOf": [
                    {
                      "$ref": "#/components/schemas/SimpleBetEvent"
                    }
                  ]
                }
              },
              "state": {
                "type": "string",
                "description": "ідентифікатор типу запису. Має дорівнювати \"instant\"\n\n*В коригуючому звіті значення ПОВИННО збігатися з оригінальним значенням.*\n"
              }
            },
            "description": "Запис що відображає ставку, або декілька ставки, з миттєво відомим результатом.\n"
          }
        ]
      },
      "SimpleBetEvent": {
        "required": [
          "amountPaid",
          "amountPlaced",
          "betId",
          "happenedAt"
        ],
        "type": "object",
        "properties": {
          "betId": {
            "type": "integer",
            "description": "Унікальний ідентифікатор ставки у системі організатора азартних ігор.\n\n*В коригуючому звіті значення ПОВИННО збігатися з оригінальним значенням.*\n",
            "format": "int64"
          },
          "amountPlaced": {
            "type": "integer",
            "description": "кількість грошей, у копійках, що була поставлена гравцем\n\n*В коригуючому звіті значення може не збігатися з оригінальним значенням, якщо в цих даних була помилка, яка потребує виправлення.*\n",
            "format": "int64"
          },
          "amountPaid": {
            "type": "integer",
            "description": "кількість грошей, у копійках, що була повернена гравцю як результат ставки\n\n*В коригуючому звіті значення може не збігатися з оригінальним значенням, якщо в цих даних була помилка, яка потребує виправлення.*\n",
            "format": "int64"
          },
          "happenedAt": {
            "type": "integer",
            "description": "часова позначка що відображає момент ставки\n\n*В коригуючому звіті значення ПОВИННО збігатися з оригінальним значенням.*\n  \n"
          }
        },
        "description": "Запис що відображає одну з ставок що разом складають InstantBetEvent\n"
      },
      "GamblingType": {
        "type": "integer",
        "description": "Тип ліцензії на провадження діяльності з організації азартних ігор\n- 1 - Організація та проведення азартних ігор у гральних закладах казино\n- 2 - Організація та проведення азартних ігор казино у мережі інтернет\n- 3 - Організація та проведення букмекерської діяльності\n- 4 - Організація та проведення азартних ігор у залах гральних автоматів\n- 5 - Організація та проведення азартних ігор в покер в мережі Інтернет\n",
        "enum": [
          1,
          2,
          3,
          4,
          5
        ]
      },
      "EquipmentType": {
        "type": "integer",
        "description": "Тип ігрового обладнання, використаного під час азартних ігор у закладі казино або у залі ігрових автоматів\n- 1 - Гральний стіл\n- 2 - Гральний стіл з кільцем рулетки\n- 3 - Гральний автомат",
        "enum": [
          1,
          2,
          3
        ]
      },
      "v1_upload_body": {
        "type": "object",
        "properties": {
          "file": {
            "type": "string",
            "description": "Файл зі звітом, що містить дані у форматі JSON. Схема файлу знаходиться у секції **ReportData**.\n",
            "format": "binary"
          },
          "Reg-Signature": {
            "type": "string",
            "description": "Цифровий підпис файлу зі звітом у форматі base64.\n- Підпис повинен бути сформований у форматі CAdES-X Long відповідно до **ДСТУ 4145-2002**. \n- Організатор повинен використовувати геш-функцію **ГОСТ 34.311-95**. *[що у подальшому буде замінена на **ДСТУ 7564:2014**, коли остання здобуде широке розповсюдження]*\n- Підпис має бути здійснений кваліфікованим ключем ЕЦП що належить організатору азартних ігор.\n"
          }
        }
      },
      "inline_response_200": {
        "type": "object",
        "properties": {
          "reportId": {
            "type": "integer",
            "description": "унікальний ідентифікатор звіту, що може буде використаний для відслідковування подальшого статусу обробки",
            "format": "int64",
            "example": 10935844264607744
          },
          "confirmationSignature": {
            "type": "string",
            "description": "цифровий підпис від звіта разом за ідентифікатором звіту, сформований відповідно до **ДСТУ 4145-2002** ключем ЕЦП що належить ДСОМ.\n",
            "format": "base64"
          }
        }
      },
      "inline_response_400": {
        "type": "object",
        "properties": {
          "details": {
            "type": "string",
            "description": "додадкові деталі помилки, що вказують на причину відхилення цифрового підпису"
          }
        }
      },
      "inline_response_500": {
        "type": "object",
        "properties": {
          "details": {
            "type": "string",
            "description": "додадкові деталі що вказують на причину помилки"
          }
        }
      },
      "v1_correction_body": {
        "type": "object",
        "properties": {
          "file": {
            "type": "string",
            "description": "Файл зі звітом, що містить дані у форматі JSON. Схема файлу знаходиться у секції **CorrectionReportData**.\n",
            "format": "binary"
          },
          "Reg-Signature": {
            "type": "string",
            "description": "Цифровий підпис файлу зі звітом у форматі base64.\n- Підпис повинен бути сформований у форматі CAdES-X Long відповідно до **ДСТУ 4145-2002**. \n- Організатор повинен використовувати геш-функцію **ГОСТ 34.311-95**. *[що у подальшому буде замінена на **ДСТУ 7564:2014**, коли остання здобуде широке розповсюдження]*\n- Підпис має бути здійснений кваліфікованим ключем ЕЦП що належить організатору азартних ігор.\n"
          }
        }
      },
      "inline_response_409": {
        "type": "object",
        "properties": {
          "details": {
            "type": "string",
            "description": "додадкові деталі помилки, що вказують на причину помилки"
          }
        }
      },
      "inline_response_200_1": {
        "type": "object",
        "properties": {
          "challenge": {
            "type": "string",
            "description": "тимчасовй токен, що оновлюється кожні 30 секунд",
            "example": "9RcpNIYMI4PV2w4bVVZCruvcmfWk/1b+X26zLZOpOQw="
          }
        }
      },
      "auth_login_body": {
        "type": "object",
        "properties": {
          "signature": {
            "type": "string",
            "format": "base64"
          }
        }
      },
      "inline_response_200_2": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string",
            "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuZXdFbWFpbCI6IiIsImh0dHA6Ly9zY2hlbWFzLnhtbHNvYXAub3JnL3dzLzIwMDUvMDUvaWRlbnRpdHkvY2xhaW1zL2VtYWlsYWRkcmVzcyI6ImFsaW5hLnMrZGVwb3NpdHNpZ25AZXNlbnRpLmNvIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiMiIsInN0YXR1cyI6IjIiLCJpZCI6IjEwMDUwMCIsImVkcnBvdSI6IjM0NTU0MzYyIiwibmJmIjoxNjY5NjUwNTk5LCJleHAiOjE2Njk3MzY5OTksImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6NTAwMCIsImF1ZCI6Imh0dHA6Ly9sb2NhbGhvc3Q6NTAwMCJ9.HTUw9dZ1UJF7OPd4633wJucL38meEr8yjZ9q9TrxiRs"
          }
        }
      },
      "inline_response_401": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string",
            "description": "пустий"
          },
          "error": {
            "type": "string",
            "description": "додадкові деталі помилки, що вказують на причину відхилення цифрового підпису"
          }
        }
      },
      "inline_response_404": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string",
            "description": "пустий"
          },
          "error": {
            "type": "string",
            "description": "додадкові деталі помилки"
          }
        }
      },
      "inline_response_200_3": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "Унікальний числовий ідентифікатор закладу у системі ДСОМ."
          },
          "address": {
            "type": "string",
            "description": "адреса закладу, що відповідає адресі в зазначеній у дозволі на провадження діяльності з організації азартних ігор"
          }
        }
      },
      "inline_response_200_4": {
        "type": "object",
        "properties": {
          "reportId": {
            "type": "integer",
            "description": "Унікальний числовий ідентифікатор звіту, має бути ідентичним параметру запиту *id*\n"
          },
          "signature": {
            "type": "string",
            "description": "підпис, що його було надано організатором під час завантаження звіту"
          },
          "uploadStartedAt": {
            "type": "string",
            "description": "дата та час прийняття до завантаження звіту у систему ДСОМ у київський таймзоні."
          },
          "uploadFinishedAt": {
            "type": "string",
            "description": "дата та час завершення завантаження звіту у систему ДСОМ у київський таймзоні."
          },
          "savedAt": {
            "type": "string",
            "description": "дата та час завершення збереження звіту у систему ДСОМ у київський таймзоні."
          },
          "status": {
            "type": "string",
            "description": "Uploading - звіт завантажується\nUploaded - звіт завантажено в системі, записи зберігаються\nSaved - записи звіту збережено в системі\n",
            "enum": [
              "Uploading",
              "Uploaded",
              "Saved"
            ]
          },
          "error": {
            "type": "string",
            "description": "Текст помилки, у разі невдалої обробки звіту."
          }
        }
      },
      "inline_response_200_5": {
        "type": "object",
        "properties": {
          "reportId": {
            "type": "integer",
            "description": "Унікальний числовий ідентифікатор звіту, має бути ідентичним параметру запиту *id*\n"
          },
          "signature": {
            "type": "string",
            "description": "підпис, що його було надано організатором під час завантаження звіту"
          },
          "uploadStartedAt": {
            "type": "string",
            "description": "дата та час прийняття до завантаження звіту у систему ДСОМ у київський таймзоні."
          },
          "uploadFinishedAt": {
            "type": "string",
            "description": "дата та час завершення завантаження звіту у систему ДСОМ у київський таймзоні."
          },
          "savedAt": {
            "type": "string",
            "description": "дата та час завершення збереження звіту у систему ДСОМ у київський таймзоні."
          },
          "processedAt": {
            "type": "string",
            "description": "дата та час завершення обробки звіту і актуалізація даних у системі ДСОМ у київський таймзоні."
          },
          "status": {
            "type": "string",
            "description": "Uploading - звіт завантажується\nUploaded - звіт завантажено в системі, записи зберігаються\nSaved - записи звіту збережено в системі, записи оброблюються\nProcessed - записи звіту оброблені в системі\n",
            "enum": [
              "Uploading",
              "Uploaded",
              "Saved",
              "Processed"
            ]
          },
          "error": {
            "type": "string",
            "description": "Текст помилки, у разі невдалої обробки звіту."
          }
        }
      }
    },
    "securitySchemes": {
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer"
      }
    }
  }
}